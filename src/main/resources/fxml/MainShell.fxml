<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<StackPane styleClass="root-bg" stylesheets="@../css/app.css" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="it.univr.diabete.controller.MainShellController">

    <!-- Card centrale con app shell -->
    <BorderPane styleClass="app-shell">

        <!-- TOP BAR -->
        <top>
            <HBox alignment="CENTER_LEFT" spacing="10" styleClass="topbar">
                <VBox spacing="2">
                    <Label styleClass="topbar-title-sub" text="Telemedicina" />
                    <Label styleClass="topbar-title-main" text="Gestione diabete" />
                </VBox>

                <!-- role badge removed -->

                <!-- ðŸ”¥ CENTRO: area che si espande e centra il banner -->
                <StackPane HBox.hgrow="ALWAYS">
                    <Label fx:id="globalAlertLabel" managed="false" opacity="0" style="-fx-font-size: 11px;           -fx-padding: 6 10;           -fx-background-radius: 999;           -fx-text-fill: #065f46;           -fx-background-color: #d1fae5;" visible="false" StackPane.alignment="CENTER" />
                </StackPane>

                <!-- Data odierna -->
                <VBox alignment="CENTER_RIGHT" spacing="2">
                    <Label styleClass="topbar-date-label" text="Oggi" />
                    <Label fx:id="todayLabel" styleClass="topbar-date-value" text="26 Nov 2025" />
                </VBox>

                <!-- Notifiche -->
                <Button fx:id="notificationsButton" styleClass="icon-button" text="ðŸ””" />

                <!-- Utente -->
                <HBox alignment="CENTER" spacing="8" styleClass="user-chip">
                    <Label fx:id="userInitialsLabel" styleClass="user-avatar-initials" text="VS" />
                </HBox>
            </HBox>
        </top>

        <!-- SIDEBAR -->
        <left>
            <VBox prefWidth="220" spacing="10" styleClass="sidebar">
                <Label styleClass="sidebar-title" text="Navigazione" />

                <!-- Bottoni nav -->
                <Button fx:id="dashboardButton" onAction="#handleDashboardNav" styleClass="nav-item" text="Dashboard" />
                <Button fx:id="measurementsButton" onAction="#handleMeasurementsNav" styleClass="nav-item" text="Misurazioni" />
                <Button fx:id="therapyButton" onAction="#handleTherapyNav" styleClass="nav-item" text="Terapia" />
                <Button fx:id="FarmacoButton" onAction="#handleFarmacoNav" styleClass="nav-item" text="Farmaco" />
                <Button fx:id="messagesButton" onAction="#handleMessagesNav" styleClass="nav-item" text="Messaggi" />
                <Button fx:id="reportsButton" onAction="#handleReportsNav" styleClass="nav-item" text="Report" />

                <Pane VBox.vgrow="ALWAYS" />

                <VBox spacing="4">
                    <Button onAction="#handleLogout" styleClass="nav-item" text="Logout" />
                </VBox>
            </VBox>
        </left>

        <!-- CONTENUTO CENTRALE -->
        <center>
            <StackPane fx:id="contentArea" style="-fx-padding: 16; -fx-background-color: #f9fafb;">
                <!-- Qui il controller carica DoctorDashboardView / PatientDashboardView -->
            </StackPane>
        </center>

    </BorderPane>
</StackPane>
