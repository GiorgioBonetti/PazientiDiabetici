<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox prefHeight="680" prefWidth="380" spacing="18" styleClass="dialog-roo" stylesheets="@../css/app.css"
      xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="it.univr.diabete.controller.AddTherapyController">

    <!-- HEADER -->
    <VBox alignment="CENTER_LEFT" spacing="4">
        <Label alignment="CENTER" styleClass="dialog-title" text="Nuova terapia"/>
    </VBox>
    <!-- ðŸ‘‡ Nuovo: nome terapia -->
    <VBox spacing="4" style="-fx-padding: 8 0 0 0;">
        <Label styleClass="form-label" text="Nome terapia"/>
        <TextField fx:id="nomeTerapiaField" promptText="Es. Terapia mattutina gennaio" styleClass="rounded-field"/>
    </VBox>
    <!-- DATE SECTION: label sopra, campo sotto -->
    <VBox spacing="16" style="-fx-padding: 4 0 0 0;">
        <VBox spacing="4">
            <Label styleClass="form-label" text="Data inizio"/>
            <DatePicker fx:id="dataInizioPicker" prefHeight="43.0" prefWidth="336.0"
                        styleClass="rounded-field"/>
        </VBox>

        <VBox spacing="4">
            <Label styleClass="form-label" text="Data fine"/>
            <DatePicker fx:id="dataFinePicker" prefHeight="43.0" prefWidth="335.0" styleClass="rounded-field"/>
        </VBox>

    </VBox>
    <Separator/>

    <!-- FARMACI SECTION -->
    <VBox spacing="8">
        <Label styleClass="section-title" text="Farmaci della terapia"/>

        <!-- Search + lista farmaci esistenti -->
        <TextField fx:id="searchFarmacoField" promptText="Cerca farmaco esistente..." styleClass="rounded-field"/>

        <ListView fx:id="farmacoListView" prefHeight="160"
                  style="-fx-background-color: transparent; -fx-padding: 4;" styleClass="farmaco-list-view"/>

        <!-- Card scrollabile orizzontale con i farmaci selezionati -->
        <Label styleClass="section-title-small" text="Farmaci selezionati"/>

        <ScrollPane fx:id="selectedFarmaciScroll" prefHeight="120"
                    styleClass="chip-scroll" vbarPolicy="NEVER">
            <HBox fx:id="selectedFarmaciPane" spacing="8" style="-fx-padding: 6 6 6 6;"/>
        </ScrollPane>

    </VBox>

    <!-- ERRORE -->
    <Label fx:id="errorLabel" managed="false" textFill="red" visible="false" wrapText="true"/>

    <!-- BUTTONS -->
    <HBox alignment="CENTER_RIGHT" spacing="10">
        <Button onAction="#handleCancel" styleClass="btn-secondary" text="Annulla"/>
        <Button onAction="#handleSave" styleClass="btn-primary" text="Crea terapia"/>
    </HBox>

</VBox>
