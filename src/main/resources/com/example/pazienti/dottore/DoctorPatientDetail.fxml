<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml">
    <top>
        <HBox spacing="10" alignment="CENTER_LEFT">
            <children>
                <Label fx:id="lblPaziente" text="Cartella: —" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                <Pane HBox.hgrow="ALWAYS"/>
                <Button text="Invia messaggio" fx:id="btnMessage"/>
                <Button text="Esporta PDF" fx:id="btnExport"/>
            </children>
            <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
        </HBox>
    </top>

    <center>
        <TabPane fx:id="tabPane" tabClosingPolicy="UNAVAILABLE">
            <!-- GLICEMIE -->
            <tabs>
                <Tab text="Glicemie">
                    <content>
                        <VBox spacing="10">
                            <children>
                                <TitledPane text="Andamento">
                                    <content>
                                        <LineChart fx:id="chartGlicemie" animated="false" prefHeight="250.0">
                                            <xAxis><CategoryAxis label="Data"/></xAxis>
                                            <yAxis><NumberAxis label="mg/dL"/></yAxis>
                                        </LineChart>
                                    </content>
                                </TitledPane>
                                <TableView fx:id="tblGlicemie" prefHeight="280.0">
                                    <columns>
                                        <TableColumn text="Data/Ora" prefWidth="160"/>
                                        <TableColumn text="Contesto" prefWidth="140"/>
                                        <TableColumn text="Valore (mg/dL)" prefWidth="140"/>
                                        <TableColumn text="Note" prefWidth="280"/>
                                    </columns>
                                    <placeholder><Label text="Nessuna misurazione"/></placeholder>
                                </TableView>
                            </children>
                            <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                        </VBox>
                    </content>
                </Tab>

                <!-- SINTOMI -->
                <Tab text="Sintomi">
                    <content>
                        <VBox spacing="10">
                            <children>
                                <HBox spacing="10" alignment="CENTER_LEFT">
                                    <children>
                                        <Button text="Aggiungi" fx:id="btnAddSintomo"/>
                                        <Button text="Aggiorna" fx:id="btnRefreshSintomi"/>
                                    </children>
                                </HBox>
                                <TableView fx:id="tblSintomi">
                                    <columns>
                                        <TableColumn text="Sintomo" prefWidth="220"/>
                                        <TableColumn text="Inizio" prefWidth="140"/>
                                        <TableColumn text="Fine" prefWidth="140"/>
                                        <TableColumn text="Patologia associata" prefWidth="220"/>
                                        <TableColumn text="Note" prefWidth="260"/>
                                        <TableColumn text="Azioni" prefWidth="140"/>
                                    </columns>
                                    <placeholder><Label text="Nessun sintomo"/></placeholder>
                                </TableView>
                            </children>
                            <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                        </VBox>
                    </content>
                </Tab>

                <!-- TERAPIE -->
                <Tab text="Terapie">
                    <content>
                        <VBox spacing="10">
                            <children>
                                <HBox spacing="10" alignment="CENTER_LEFT">
                                    <children>
                                        <Button text="Nuova terapia" fx:id="btnNewTherapy"/>
                                        <Button text="Aggiorna" fx:id="btnRefreshTherapies"/>
                                    </children>
                                </HBox>
                                <TableView fx:id="tblTerapie">
                                    <columns>
                                        <TableColumn text="Farmaco" prefWidth="200"/>
                                        <TableColumn text="Dose" prefWidth="120"/>
                                        <TableColumn text="Frequenza/die" prefWidth="130"/>
                                        <TableColumn text="Indicazioni" prefWidth="260"/>
                                        <TableColumn text="Periodo" prefWidth="180"/>
                                        <TableColumn text="Azioni" prefWidth="140"/>
                                    </columns>
                                    <placeholder><Label text="Nessuna terapia"/></placeholder>
                                </TableView>

                                <TitledPane text="Assunzioni registrate">
                                    <content>
                                        <TableView fx:id="tblAssunzioni">
                                            <columns>
                                                <TableColumn text="Data/Ora" prefWidth="160"/>
                                                <TableColumn text="Farmaco" prefWidth="200"/>
                                                <TableColumn text="Dose" prefWidth="120"/>
                                                <TableColumn text="Con pasto" prefWidth="120"/>
                                                <TableColumn text="Note" prefWidth="260"/>
                                            </columns>
                                            <placeholder><Label text="Nessuna assunzione"/></placeholder>
                                        </TableView>
                                    </content>
                                </TitledPane>
                            </children>
                            <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                        </VBox>
                    </content>
                </Tab>

                <!-- ALERT -->
                <Tab text="Alert">
                    <content>
                        <VBox spacing="10">
                            <children>
                                <HBox spacing="10">
                                    <children>
                                        <ComboBox fx:id="cmbSeverita" promptText="Severità"/>
                                        <ComboBox fx:id="cmbPeriodoAlert" promptText="Periodo"/>
                                        <Button text="Aggiorna" fx:id="btnRefreshAlert"/>
                                    </children>
                                </HBox>
                                <TableView fx:id="tblAlert">
                                    <columns>
                                        <TableColumn text="Tipo" prefWidth="220"/>
                                        <TableColumn text="Severità" prefWidth="120"/>
                                        <TableColumn text="Messaggio" prefWidth="380"/>
                                        <TableColumn text="Prima segnalazione" prefWidth="160"/>
                                        <TableColumn text="Ultimo aggiornamento" prefWidth="160"/>
                                        <TableColumn text="Stato" prefWidth="120"/>
                                        <TableColumn text="Azioni" prefWidth="140"/>
                                    </columns>
                                    <placeholder><Label text="Nessun alert"/></placeholder>
                                </TableView>
                            </children>
                            <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                        </VBox>
                    </content>
                </Tab>

                <!-- FATTORI DI RISCHIO / COMORBIDITÀ -->
                <Tab text="Rischi e Comorbidità">
                    <content>
                        <VBox spacing="10">
                            <children>
                                <TitledPane text="Fattori di rischio">
                                    <content>
                                        <GridPane hgap="10" vgap="8">
                                            <children>
                                                <Label text="Fumatore:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                                                <CheckBox fx:id="chkFumatore" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                                                <Label text="Ex-fumatore:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                                                <CheckBox fx:id="chkExFumatore" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                                                <Label text="Alcol:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                                                <CheckBox fx:id="chkAlcol" GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                                                <Label text="Stupefacenti:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                                                <CheckBox fx:id="chkStupefacenti" GridPane.rowIndex="3" GridPane.columnIndex="1"/>

                                                <Label text="BMI/Obesità:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                                                <TextField fx:id="txtBMI" GridPane.rowIndex="4" GridPane.columnIndex="1"/>
                                            </children>
                                        </GridPane>
                                    </content>
                                </TitledPane>

                                <TitledPane text="Comorbidità">
                                    <content>
                                        <VBox spacing="8">
                                            <children>
                                                <HBox spacing="10">
                                                    <children>
                                                        <Button text="Aggiungi comorbidità" fx:id="btnAddComorb"/>
                                                        <Button text="Aggiorna" fx:id="btnRefreshComorb"/>
                                                    </children>
                                                </HBox>
                                                <TableView fx:id="tblComorbidita">
                                                    <columns>
                                                        <TableColumn text="Diagnosi" prefWidth="260"/>
                                                        <TableColumn text="Inizio" prefWidth="140"/>
                                                        <TableColumn text="Fine" prefWidth="140"/>
                                                        <TableColumn text="Note" prefWidth="320"/>
                                                        <TableColumn text="Azioni" prefWidth="140"/>
                                                    </columns>
                                                    <placeholder><Label text="Nessuna comorbidità"/></placeholder>
                                                </TableView>
                                            </children>
                                        </VBox>
                                    </content>
                                </TitledPane>

                                <HBox spacing="10" alignment="CENTER_RIGHT">
                                    <children>
                                        <Button text="Salva profilo rischio" fx:id="btnSaveRisk"/>
                                    </children>
                                </HBox>
                            </children>
                            <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                        </VBox>
                    </content>
                </Tab>
            </tabs>
        </TabPane>
    </center>
</BorderPane>
